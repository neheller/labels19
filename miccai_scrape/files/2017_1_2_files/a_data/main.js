!function(){"use strict";window.addEventListener("message",function(n){var e,t,o=Object.prototype.hasOwnProperty.call(n.data,"payload")?n.data.payload:void 0,r=Object.prototype.hasOwnProperty.call(n.data,"endpoint")?n.data.endpoint:void 0;e=n.origin,t=!1,[".springer.com",".springernature.com",".springernature.app",".biomedcentral.com",".springeropen.com",".nature.com"].forEach(function(n){e.indexOf(n)>=0&&(t=!0)}),t&&o&&r&&(function(n){var e=document.cookie.split("; ").map(function(n){return n.split("=")}).filter(function(n){return"event-tracker"===n[0]||"event-tracker-session"===n[0]});window.parent.postMessage({cookies:e},n)}(n.origin),function(n,e){console.log("endpoint",e);var t={method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"},credentials:"same-origin"};return new Promise(function(n,o){fetch(e,t).then(function(n){if(201===n.status)return n.text();throw new Error("Unexpected response from the event-tracker API: "+n.status)}).then(function(e){n(e)}).catch(function(n){o(n)})})}(o,r).then(function(n){console.log("done",n)}))})}();
